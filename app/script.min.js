function storeFactory(){return factory=[{id:1,name:"Trainers",description:"Light and cosy",price:100,img:"trainers.jpg"},{id:2,name:"Jeans",description:"Comfortable to wear",price:120,img:"jeans.jpg"},{id:3,name:"Trousers",description:"Good fashioned",price:95,img:"trousers.jpg"},{id:4,name:"Pyjama",description:"For comfortable sleeping",price:200,img:"pyjama.jpg"},{id:5,name:"Shirt",description:"For business and meetings",price:80,img:"shirt.jpg"},{id:6,name:"Snickers",description:"Fast, rapid and good",price:105,img:"snickers.jpg"}]}angular.module("store",["ngRoute"]),angular.module("store").factory("storeFactory",storeFactory),angular.module("store").config(["$routeProvider",function(o){o.when("/",{templateUrl:"app/list.component/products.html",controller:"productListCtrl",resolve:{_products:function(){return storeFactory()}}}).when("/product/:id",{templateUrl:"app/prod.component/product.html",controller:"productCtrl"}).when("/create",{templateUrl:"app/custom.component/custom.prod.html",controller:"customCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("store").run(["storeFactory",function(){var o=JSON.stringify(storeFactory());localStorage.setItem("products",o)}]),angular.module("store").controller("productListCtrl",["_products","$route","$scope","$location",function(o,t,r,e){r.path="../../assets/img/",r.products=JSON.parse(localStorage.getItem("products")),r.moveTo=function(o){e.path("/product/"+o.id)},r.delete=function(o){var t=confirm("Are you shure want to remove this product?");if(t){var e=r.products.indexOf(o);r.products.splice(e,1);var i=JSON.stringify(r.products);localStorage.setItem("products",i)}}}]),angular.module("store").controller("productCtrl",["$scope","$location","$routeParams",function(o,t,r){o.editProduct=o.saved=!1,o.part="../../assets/img/";var e=r.id,i=JSON.parse(localStorage.getItem("products"));angular.forEach(i,function(t,r){t.id==e&&(o.product=t,o.key=r,o.logo=t.img)}),o.edit=function(){o.editProduct=!0,o.saved=!1},o.saveLogo=function(t){o.logo=t.files[0].name,o.path=o.part+o.logo;var r=window.URL||window.webkitURL;o.fails=!1;var e=new Image;e.onload=function(){(this.width>400||this.height>400)&&(o.fails=!0)},e.src=r.createObjectURL(t.files[0]),o.$apply()},o.path=o.part+o.logo,o.addProd=function(){if(o.warn=!1,o.notification=!1,o.product.id&&o.product.name&&o.product.description&&o.product.price){if(angular.forEach(i,function(t,r){t.id==o.product.id&&o.key!=r&&(o.warn=!0)}),!o.warn&&!o.fails){var t={id:o.product.id,name:o.product.name,description:o.product.description,price:o.product.price,img:o.logo};i.splice(o.key,1,t);var r=JSON.stringify(i);localStorage.setItem("products",r),o.editProduct=!1,o.saved=!0}}else o.notification=!0}}]),angular.module("store").controller("customCtrl",["$scope",function(o){o.notification=o.saved=!1;var t=JSON.parse(localStorage.getItem("products"));o.logo="noimg.jpg",o.part="../../assets/img/",o.addProd=function(){if(o.warn=!1,o.notification=!1,o.logo&&o.id&&o.name&&o.description&&o.price){if(angular.forEach(t,function(t,r){t.id==o.id&&o.key!=r&&(o.warn=!0)}),!o.warn&&!o.fails){var r={id:o.id,name:o.name,description:o.description,price:o.price,img:o.logo};o.products=JSON.parse(localStorage.getItem("products")),o.products.push(r);var e=JSON.stringify(o.products);localStorage.setItem("products",e),o.saved=!0}}else o.notification=!0},o.saveLogo=function(t){var r=window.URL||window.webkitURL;o.logo=t.files[0].name,o.fails=!1,o.path=o.part+o.logo;var e=new Image;e.onload=function(){(this.width>400||this.height>400)&&(o.fails=!0)},e.src=r.createObjectURL(t.files[0]),o.$apply()},o.path=o.part+o.logo}]);